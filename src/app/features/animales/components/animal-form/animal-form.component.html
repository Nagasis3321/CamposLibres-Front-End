<form [formGroup]="animalForm" (ngSubmit)="onSubmit()" class="flex flex-col max-h-[75vh]">
  <div class="overflow-y-auto flex-grow pr-2">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label for="caravana" class="block text-sm font-medium text-gray-700">N° Caravana (Opcional)</label>
        <input id="caravana" type="text" formControlName="caravana" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2">
      </div>
      <div>
        <label for="pelaje" class="block text-sm font-medium text-gray-700">Pelaje</label>
        <input id="pelaje" type="text" formControlName="pelaje" list="pelajes-list" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2">
        <datalist id="pelajes-list">
          <option *ngFor="let pelaje of pelajes" [value]="pelaje"></option>
        </datalist>
      </div>
      <div>
        <label for="sexo" class="block text-sm font-medium text-gray-700">Sexo</label>
        <select id="sexo" formControlName="sexo" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2">
          <option value="Hembra">Hembra</option>
          <option value="Macho">Macho</option>
        </select>
      </div>
      <div>
        <label for="tipoAnimal" class="block text-sm font-medium text-gray-700">Tipo de Animal</label>
        <select id="tipoAnimal" formControlName="tipoAnimal" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2">
          <!-- Grupo de opciones para Hembra -->
          <ng-container *ngIf="animalForm.get('sexo')?.value === 'Hembra'">
            <optgroup label="Hembra">
              <option *ngFor="let tipo of tiposHembra" [value]="tipo">{{ tipo }}</option>
            </optgroup>
          </ng-container>
          <!-- Grupo de opciones para Macho -->
          <ng-container *ngIf="animalForm.get('sexo')?.value === 'Macho'">
            <optgroup label="Macho">
              <option *ngFor="let tipo of tiposMacho" [value]="tipo">{{ tipo }}</option>
            </optgroup>
          </ng-container>
        </select>
      </div>
      <div class="md:col-span-2">
        <label for="dueno" class="block text-sm font-medium text-gray-700">Dueño</label>
        <select id="dueno" formControlName="duenoId" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2">
          <option *ngIf="duenos.length === 0" disabled>No hay dueños disponibles</option>
          <option *ngFor="let dueno of duenos" [value]="dueno.id">{{ dueno.nombre }}</option>
        </select>
      </div>
      <div class="md:col-span-2">
        <label for="descripcion" class="block text-sm font-medium text-gray-700">Descripción</label>
        <textarea id="descripcion" formControlName="descripcion" rows="3" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"></textarea>
      </div>
    </div>
  </div>
  <div class="flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-3 gap-2 pt-4 mt-auto flex-shrink-0">
    <button type="button" (click)="cancel.emit()" class="btn-secondary w-full sm:w-auto">Cancelar</button>
    <button type="submit" [disabled]="animalForm.invalid" class="btn-primary disabled:opacity-50 w-full sm:w-auto">Guardar Animal</button>
  </div>
</form>