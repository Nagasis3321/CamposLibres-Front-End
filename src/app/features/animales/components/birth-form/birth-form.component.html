<form [formGroup]="birthForm" (ngSubmit)="onSubmit()" class="space-y-4">
  <div>
    <label for="fecha" class="block text-sm font-medium text-gray-700 mb-1">
      Fecha del Parto <span class="text-red-500">*</span>
    </label>
    <input
      type="date"
      id="fecha"
      formControlName="fecha"
      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
      [class.border-red-500]="fecha?.invalid && fecha?.touched"
    />
    <div *ngIf="fecha?.invalid && fecha?.touched" class="mt-1 text-sm text-red-600">
      La fecha es obligatoria.
    </div>
  </div>

  <div>
    <label for="estado" class="block text-sm font-medium text-gray-700 mb-1">
      Estado de la Cría <span class="text-red-500">*</span>
    </label>
    <select
      id="estado"
      formControlName="estado"
      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
      [class.border-red-500]="estado?.invalid && estado?.touched"
    >
      <option value="VIVO">Vivo</option>
      <option value="MUERTO">Muerto</option>
      <option value="NATIMUERTO">Natimuerto</option>
    </select>
    <div *ngIf="estado?.invalid && estado?.touched" class="mt-1 text-sm text-red-600">
      El estado es obligatorio.
    </div>
  </div>

  <div>
    <label for="sexoCria" class="block text-sm font-medium text-gray-700 mb-1">Sexo de la Cría</label>
    <select
      id="sexoCria"
      formControlName="sexoCria"
      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
    >
      <option value="">Seleccionar...</option>
      <option value="Hembra">Hembra</option>
      <option value="Macho">Macho</option>
    </select>
  </div>

  <div>
    <label for="peso" class="block text-sm font-medium text-gray-700 mb-1">Peso (kg)</label>
    <input
      type="text"
      id="peso"
      formControlName="peso"
      placeholder="Ej: 35.5"
      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
    />
  </div>

  <div>
    <label for="criaId" class="block text-sm font-medium text-gray-700 mb-1">Asociar Cría Existente (Opcional)</label>
    <select
      id="criaId"
      formControlName="criaId"
      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
    >
      <option value="">Ninguna (crear nueva)</option>
      <option *ngFor="let cria of (availableCrias$ | async)?.data || []" [value]="cria.id">
        {{ cria.caravana || cria.tipoAnimal }} - {{ cria.sexo }}
      </option>
    </select>
  </div>

  <div>
    <label for="observaciones" class="block text-sm font-medium text-gray-700 mb-1">Observaciones</label>
    <textarea
      id="observaciones"
      formControlName="observaciones"
      rows="3"
      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
    ></textarea>
  </div>

  <div class="flex justify-end gap-3 pt-4 border-t border-gray-200">
    <button
      type="button"
      (click)="onCancel()"
      class="btn-secondary"
    >
      Cancelar
    </button>
    <button
      type="submit"
      [disabled]="birthForm.invalid"
      class="btn-primary disabled:opacity-50 disabled:cursor-not-allowed"
    >
      {{ mode === 'create' ? 'Crear' : 'Actualizar' }}
    </button>
  </div>
</form>

