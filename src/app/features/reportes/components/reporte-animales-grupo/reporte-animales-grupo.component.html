<div class="space-y-6">
  <div class="card">
    <h3 class="text-xl font-semibold mb-4">Detalles Animales Grupo</h3>
    
    <form [formGroup]="form" (ngSubmit)="generarReporte()" class="space-y-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Grupo</label>
        <select formControlName="grupoId" class="w-full border border-gray-300 rounded-md p-2">
          <option value="">Seleccione un grupo</option>
          <option *ngFor="let grupo of grupos" [value]="grupo.id">
            {{ grupo.nombre }}
          </option>
        </select>
      </div>

      <button type="submit" [disabled]="loading || form.invalid" class="btn-primary">
        {{ loading ? 'Generando...' : 'Generar Reporte' }}
      </button>
    </form>
  </div>

  <div *ngIf="reporteData" class="space-y-6">
    <div class="flex justify-end gap-2">
      <button (click)="exportarCompletoPDF()" class="btn-secondary">
        ðŸ“„ Exportar PDF Completo
      </button>
      <button (click)="exportarCompletoExcel()" class="btn-secondary">
        ðŸ“Š Exportar Excel Completo
      </button>
    </div>

    <!-- Datos por Usuario del Grupo -->
    <div *ngFor="let item of reporteData.usuarios" class="space-y-4">
      <div class="card">
        <h4 class="text-lg font-semibold mb-4">Usuario: {{ item.usuario.nombre }}</h4>
        
        <app-datos-por-tipo 
          [datosPorTipo]="item.datosPorTipo"
          [titulo]="'Datos por Tipo - ' + item.usuario.nombre"
          [mostrarBotones]="true">
        </app-datos-por-tipo>
      </div>

      <div class="card">
        <app-listado-animales 
          [animales]="item.listados"
          [titulo]="'Listado de Animales - ' + item.usuario.nombre"
          [mostrarBotones]="true">
        </app-listado-animales>
      </div>
    </div>
  </div>
</div>

