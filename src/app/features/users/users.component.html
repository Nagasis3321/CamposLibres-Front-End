<div class="space-y-6">
  <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4">
    <h2 class="text-3xl font-bold text-neutral-dark">Gestión de Usuarios</h2>
    <button (click)="openModalParaCrear()" class="btn-primary w-full sm:w-auto">
      Nuevo Usuario
    </button>
  </div>

  <!-- Barra de búsqueda -->
  <div class="card">
    <div class="flex flex-col sm:flex-row gap-4">
      <input
        #searchInput
        type="text"
        placeholder="Buscar por email..."
        (keyup.enter)="onSearch(searchInput.value)"
        class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
      />
      <button
        type="button"
        (click)="onSearch(searchInput.value)"
        class="btn-secondary"
      >
        Buscar
      </button>
    </div>
  </div>

  <!-- Lista de usuarios -->
  <app-user-list 
    [users]="(users$ | async) || []" 
    (editar)="onEditar($event)" 
    (eliminar)="onEliminar($event)"
    (verDetalle)="onVerDetalle($event)">
  </app-user-list>

  <!-- Paginación -->
  <div class="flex justify-center items-center gap-4">
    <button
      (click)="onPageChange(currentPage - 1)"
      [disabled]="currentPage <= 1"
      class="btn-secondary disabled:opacity-50 disabled:cursor-not-allowed"
    >
      Anterior
    </button>
    <span class="text-neutral-dark">
      Página {{ currentPage }} de {{ Math.ceil(totalUsers / pageSize) }}
    </span>
    <button
      (click)="onPageChange(currentPage + 1)"
      [disabled]="currentPage >= Math.ceil(totalUsers / pageSize)"
      class="btn-secondary disabled:opacity-50 disabled:cursor-not-allowed"
    >
      Siguiente
    </button>
  </div>

  <!-- Modal de formulario -->
  <app-modal 
    [isOpen]="isModalOpen" 
    [title]="selectedUser ? 'Editar Usuario' : 'Crear Nuevo Usuario'" 
    (close)="isModalOpen = false">
    <app-user-form
      [user]="selectedUser"
      [mode]="modalMode"
      (save)="onSaveUser($event)"
      (cancel)="isModalOpen = false">
    </app-user-form>
  </app-modal>
</div>

