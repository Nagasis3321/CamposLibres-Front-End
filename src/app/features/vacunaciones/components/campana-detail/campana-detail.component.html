<div class="space-y-6" *ngIf="!loading && campana">
  <div class="flex items-center justify-between">
    <h2 class="text-3xl font-bold text-neutral-dark">Detalle de Campa침a</h2>
    <button (click)="goBack()" class="btn-secondary">
      Volver a Lista
    </button>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <!-- Informaci칩n B치sica -->
    <div class="card">
      <h3 class="text-xl font-semibold mb-4 text-neutral-dark">Informaci칩n de la Campa침a</h3>
      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-500 mb-1">Nombre</label>
          <p class="text-lg text-gray-900">{{ campana.nombre }}</p>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-500 mb-1">Fecha</label>
          <p class="text-lg text-gray-900">{{ formatDate(campana.fecha) }}</p>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-500 mb-1">Productos Utilizados</label>
          <p class="text-gray-900 whitespace-pre-wrap">{{ campana.productosUtilizados || 'N/A' }}</p>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-500 mb-1">Observaciones</label>
          <p class="text-gray-900 whitespace-pre-wrap">{{ campana.observaciones || 'Sin observaciones' }}</p>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-500 mb-1">Estado</label>
          <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium"
                [ngClass]="{
                  'bg-yellow-100 text-yellow-800': campana.estado === 'Pendiente',
                  'bg-blue-100 text-blue-800': campana.estado === 'En Progreso',
                  'bg-green-100 text-green-800': campana.estado === 'Completada',
                  'bg-red-100 text-red-800': campana.estado === 'Cancelada'
                }">
            {{ campana.estado || 'Pendiente' }}
          </span>
        </div>
      </div>
    </div>

    <!-- Informaci칩n Adicional -->
    <div class="card">
      <h3 class="text-xl font-semibold mb-4 text-neutral-dark">Informaci칩n Adicional</h3>
      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-500 mb-1">ID</label>
          <p class="text-sm text-gray-600 font-mono break-all">{{ campana.id }}</p>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-500 mb-1">N칰mero de Animales</label>
          <p class="text-lg text-gray-900">{{ campana.animales.length }} animales</p>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-500 mb-1">Fecha de Registro</label>
          <p class="text-gray-900">{{ formatDate(campana.createdAt) }}</p>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-500 mb-1">칔ltima Actualizaci칩n</label>
          <p class="text-gray-900">{{ formatDate(campana.updatedAt) }}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Lista de Animales -->
  <div class="card" *ngIf="campana.animales && campana.animales.length > 0">
    <h3 class="text-xl font-semibold mb-4 text-neutral-dark">Animales de la Campa침a</h3>
    <div class="overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Caravana</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Tipo</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Pelaje</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Sexo</th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          <tr *ngFor="let animal of campana.animales" class="hover:bg-gray-50">
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ animal.caravana || 'N/A' }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ animal.tipoAnimal }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ animal.pelaje }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ animal.sexo }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="flex gap-3">
    <button (click)="editAnimalesCampana()" class="btn-primary">
      九勇 Modificar Animales Campa침a
    </button>
    <button (click)="openEditModal()" class="btn-secondary">
      游닇 Modificar Campa침a
    </button>
  </div>
</div>

<div *ngIf="loading" class="flex justify-center items-center h-64">
  <div class="text-gray-500">Cargando...</div>
</div>

<div *ngIf="!loading && !campana" class="card">
  <p class="text-center text-gray-500">Campa침a no encontrada.</p>
</div>

<!-- Modal de Edici칩n de Campa침a -->
<app-modal 
  [isOpen]="isEditModalOpen" 
  [title]="'Modificar Campa침a'" 
  [size]="'xl'"
  (close)="isEditModalOpen = false">
  <app-campana-form 
    [campana]="campana" 
    [editMode]="true"
    (save)="onSaveEdit($event)"
    (cancel)="isEditModalOpen = false">
  </app-campana-form>
</app-modal>

